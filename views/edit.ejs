<!doctype html>
<html lang="ko">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <style>
    

    </style>
    <title>board</title>
  </head>
  <%- include('nav.html')%>

  <body>
    <form action="/board/boardAdd" method="post" enctype="multipart/form-data">
      <div class="row mb-3">
        <label for="title" class="col-sm-2 col-form-label">제목</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="title" name="title" value="<%= data[0].title%>">
        </div>
      </div>
      <div class="row mb-3">
        <label for="title" class="col-sm-2 col-form-label">카테고리</label>
        <div class="col-sm-10">
          <select class="form-select" name="category" id="category">
            <% for(var i = 0; i < categoryList.length; i++){ %>
              <% if(categoryList[i].categorySeq == data[0].categorySeq ){ %>   
                <option value="<%= categoryList[i].categorySeq%>">
                    <%= categoryList[i].categoryName %>
                </option>
              <% }else{ %>
                <option value="<%= categoryList[i].categorySeq%>" selected>
                  <%= categoryList[i].categoryName %>
              </option>
              <% }%>
            <% } %>
            
          </select>
        </div>
      </div>
     
      <div class="row mb-3">
        <label for="content" class="col-sm-2 col-form-label">내용</label>
        <div class="col-sm-10">
          <textarea id="content" name="content"><%=data[0].content %></textarea>
        </div>
      </div>
      <div class="row mb-3">
        <label for="image" class="col-sm-2 col-form-label">이미지</label>
        <div class="col-sm-10">
            <div>
                <% if(data[0].fileSeq !=null){%>
                <div class="imgList">
                   <label for="fileSeq"><%= data[0].fileOriginName%></label><button type="button" class="delBtn" id="fileSeq" data-id="<%=data[0].fileSeq%>">삭제</button>
                </div>
                <%}else{ %>
                <div class="imgList">
                    <input type="file" name="image" id="image"><!--key boardSeq로 저장-->
                </div>
                <%}%>
            </div>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">등록</button>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
    <script>
        // $(document).on("click",".delBtn",function(){
        //     if(confirm("삭제된 파일은 복구되지 않습니다.\n 파일을 삭제하시겠습니까?")){
        //         var fileSeq = $(this).data("id");
                
        //         $.ajax({
        //             method : 'post'
        //             , url : '/board/imgDel'
        //             , data : {fileSeq : fileSeq}
        //         }).done(function(result){
        //             // 성공
        //             alert(result.message);

        //             // 기존 노드 삭제 및 파일 추가 html 노드에 붙이기

        //         }).fail(function(xhr, textStatus, errorThrown){
        //             // 실패
        //             // xhr
        //             // textStatus : error code
        //             // errorThrown : error msg
        //             console.log(xhr, textStatus, errorThrown);
          
        //           });
        //     }
  
        // });

    </script>
  </body>
</html>
